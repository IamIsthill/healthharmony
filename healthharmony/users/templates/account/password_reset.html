{% extends 'base.html' %}
{% block header %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
          crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>
{% endblock %}
{% block main %}
    <div class="form-content my-3 p-3">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-5">
                    <div class="card shadow-lg border-0 rounded-lg mt-0 mb-3">
                        <div class="card-header justify-content-center">
                            <div id="error_div"></div>
                            <h3 class="font-weight-light my-4 text-center">Forgot Password?</h3>
                        </div>
                        {% if form.errors %}
                            <div class="alert alert-danger alert-dismissible" role="alert">
                                <div id="form_errors">
                                    {% for key, value in form.errors.items %}<strong>{{ value }}</strong>{% endfor %}
                                </div>
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                        {% endif %}
                        <div class="card-body">
                            <form method="POST">
                                {% csrf_token %}
                                <div class="form-row">
                                    <div class="col-md-10 offset-md-1">
                                        <div class="form-group">
                                            <label class="small mb-1" for="id_email">Email</label>
                                            <input type="email"
                                                   name="email"
                                                   class="form-control"
                                                   autocomplete="email"
                                                   maxlength="254"
                                                   required
                                                   id="id_email"
                                                   placeholder="Enter email" />
                                        </div>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="col-md-10 offset-md-1">
                                        <div class="form-group mt-0 mb-1">
                                            <button type="submit" class="col-md-12 btn btn-dark">Submit</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="card-footer text-center">
                            <div class="small">
                                <a href="{% url 'account_signup' %}">Create A New Account</a>
                                <br />
                                <a href="{% url 'account_login' %}">Back To Login</a>
                                <br />
                                <a href="{% url 'account_login' %}" class="js_back_last_page">Back To Previous Page</a>
                                <br />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block script %}
    <script>
    handle_bring_last_page()

    function handle_bring_last_page() {
      const link = document.querySelector('.js_back_last_page')
      link.addEventListener('click', (event) => {
        event.preventDefault()
        history.back()
      })
    }
    </script>
{% endblock %}
{% comment %} {% extends 'account/base_entrance.html' %}
{% load i18n allauth account %}
{% block head_title %}
  {% trans 'Password Reset' %}
{% endblock %}
{% block content %}
  {% element h1 %}
  {% trans 'Password Reset' %}
  {% endelement %}
  {% if user.is_authenticated %}
    {% include 'account/snippets/already_logged_in.html' %}
  {% endif %}
  {% element p %}
  {% trans "Forgotten your password? Enter your email address below, and we'll send you an email allowing you to reset it." %}
  {% endelement %}
  {% url 'account_reset_password' as reset_url %}
  {% element form form=form method='post' action=reset_url %}
  {% slot body %}
  {% csrf_token %}
  {% element fields form=form %}
  {% endelement %}
  {% endslot %}
  {% slot actions %}
  {% element button type='submit' %}
  {% trans 'Reset My Password' %}
  {% endelement %}
  {% endslot %}
  {% endelement %}
  {% element p %}
  {% blocktrans %}Please contact us if you have any trouble resetting your password.{% endblocktrans %}
  {% endelement %}
{% endblock %} {% endcomment %}
